
# Leave Request Management – AI assistant guide

- **Architecture**: Django 5 + DRF backend (users, leaves, notifications apps) with JWT auth and MySQL in prod; SQLite files exist for local data snapshots. React 18 + Tailwind frontend lives in [frontend](frontend/README.md). API base path is `/api/`.
- **Environments**: Copy `.env.example` to `.env` and set DB credentials, `SECRET_KEY`, CORS/hosts. Prod uses MySQL via `DATABASE_URL`; dev can use bundled `db.sqlite3`. Frontend expects `REACT_APP_API_BASE` (default http://127.0.0.1:8000) in [frontend/.env.example](frontend/README.md).
- **Local backend workflow**: `python -m venv .venv && .venv\Scripts\activate`, `pip install -r requirements.txt`, `python manage.py migrate`, optionally `python manage.py createsuperuser`, `python manage.py create_test_data` for demo accounts. Run with `python manage.py runserver` (serves at 127.0.0.1:8000/api/ and /admin/).
- **Data seeding/safety**: Use `python manage.py setup_production_data` to load users from `SEED_USERS` or `SEED_USERS_FILE`; keeps credentials out of git (see guidance in [README.md](README.md)). Backup artifacts live alongside the repo (e.g., `data-backup-*.json`, `db-backup-*.sqlite3`).
- **Core APIs**: Auth at `/api/auth/token/` (+refresh). Employee flows at `/api/leaves/requests/`, `/dashboard/`, `/history/`, `/balances/`. Manager actions at `/api/leaves/manager/` and `/pending_approvals/` with approve/reject mutations. HR/global views exposed under `/api/leaves/manager/` variants (see [README.md](README.md)).
- **Testing/checks**: `python manage.py test` for backend suites; `python manage.py check` for system checks. Migrations via `python manage.py makemigrations && python manage.py migrate`.
- **Frontend workflow**: From [frontend](frontend/README.md), `npm install`, `npm start` (CRA dev server on 3000). Build with `npm run build`. Auth stores `access` and `refresh` in `localStorage`; session restoration relies on `/api/users/me/` after login.
- **Frontend patterns**: Components under `frontend/src/components` (Login, Dashboard, LeaveRequest, LeaveHistory, ManagerDashboard), contexts in `src/contexts/AuthContext.js`, API client in `src/services/api.js`. Use Tailwind utility classes already present; prefer stateful React hooks and context for auth rather than ad-hoc fetch calls.
- **Integration points**: Frontend talks directly to backend at `REACT_APP_API_BASE/api/...` (no proxy). Ensure CORS aligns with `CORS_ALLOWED_ORIGINS` in backend settings.
- **Aesthetic guidance (frontend)**: Pick purposeful fonts (e.g., Space Grotesk, Sora) via local import; define a small color system (e.g., deep teal + sand accent) in Tailwind config or CSS vars; avoid default gray/purple. Use layered backgrounds (soft gradients or subtle grid) instead of flat white, and add meaningful motion (staggered section reveals, button hover lift) rather than constant micro-animations. Ensure dashboards stay legible on mobile—stack cards, simplify tables with collapse/summary rows, and keep CTA buttons high-contrast.
- **Contributing cadence**: Keep auth/role logic in backend serializers/views (users, leaves apps); prefer management commands for data changes rather than manual SQL. When adding endpoints, align with existing REST patterns and JWT permissions; mirror shapes in `frontend/src/services/api.js`.
- **When unsure**: Check flows and credentials in [README.md](README.md) and reuse existing management commands before inventing new scripts.
